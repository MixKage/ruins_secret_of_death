# Ruins: Secret Of Death (Telegram Bot)

Телеграм-игра в жанре текстового рогалика. Один забег = одна попытка до смерти.
Цель — пройти как можно больше этажей руин и занять место в рейтинге.

## Ключевые механики
- Случайное стартовое оружие 0 этажа.
- Каждая новая лестница — случайная группа врагов с характеристиками текущего этажа.
- Бой пошаговый: враги отвечают после завершения вашего хода.
- Очки действия (ОД): тратятся на атаки/умения, полностью восстанавливаются кнопкой "Завершить ход".
- Между этажами здоровье полностью восстанавливается только в источнике; оружие усиливается только при выборе награды.
- Оружие и враги распределены по зонам 1–3, 4–6, 7–9 этажей.
- Между этажами появляются тематические комнаты: источник благодати (полный хил), сундук древних и костер паломника (дают малое зелье).
- Амулет удачи повышает шанс получить награду из сундука на +2 этажа.
- В бою доступна кнопка "Справка" с кратким описанием противников.
- Шанс попадания: зависит от точности игрока и уклонения врага.
- Оружие может иметь эффекты (сплэш-урон по группе, кровотечение, бронебойные удары).
- После победы — выбор 1 из 3 наград (оружие, апгрейд, зелье).
- Рейтинг: максимум достигнутых этажей за все забеги.

## Стек
- Python 3.11+
- aiogram 3.x
- SQLite (aiosqlite)

## Запуск
1) Создать бота и получить токен у BotFather.
2) Экспортировать токен:

```bash
export BOT_TOKEN="<token>"
```

3) Установить зависимости и запустить:

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python -m bot.main
```

## Структура данных (SQLite)
- `users`: id, telegram_id, username, max_floor, created_at
- `runs`: id, user_id, started_at, ended_at, max_floor, is_active, state_json

## TODO для контента
- Добавить больше врагов, оружия и апгрейдов.
- Написать легенды/события этажей.
